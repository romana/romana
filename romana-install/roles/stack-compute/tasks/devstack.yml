---
- name: Get devstack
  git: repo="https://github.com/openstack-dev/devstack" version="stable/liberty" dest="~/devstack"

- name: Install compute local.conf
  template: src=local.conf dest="~/devstack/local.conf"

- name: Run devstack "stack" script. This may take around 10 minutes.
  shell: chdir="~/devstack" creates="~/devstack/stack.sh.log" ./stack.sh
  async: 3600
  poll: 30
